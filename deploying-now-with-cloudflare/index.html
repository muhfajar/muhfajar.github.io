<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=twitter:card content="summary"><meta name=twitter:site content="@__muhfajar"><meta name=author content="map[name:Muhamad Fajar]"><meta name=description content=":: this post has been updated with the latest update from Vercel (formerly ZEIT) I&amp;rsquo;ve been playing around with Now deployment for a few months. First I thought about Now is magic, with only small configuration (in v2) I can deploy a static website easily and with the latest update, now I can deploy (with default template) any static website without any configuration. That&amp;rsquo;s amazing.
How to Deploy First thing, you need Vercel account, of course."><meta name=keywords content="muhamad fajar,cloud,tech,now,cloudflare"><meta name=robots content="noodp"><meta name=theme-color content="#252627"><link rel=canonical href=https://www.muhfajar.blog/deploying-now-with-cloudflare/><title>Deploying Now with Cloudflare &bull; Muhamad Fajar</title><link href=https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css rel=stylesheet type=text/css><link rel=stylesheet href=https://www.muhfajar.blog/main.min.a3f9cdbc2e476365cbaabbbd09040b2f3be8aa0f8543b611674fbdba05aca96d.css><link rel=apple-touch-icon sizes=180x180 href=https://www.muhfajar.blog/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://www.muhfajar.blog/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://www.muhfajar.blog/favicon-16x16.png><link rel=manifest href=https://www.muhfajar.blog/site.webmanifest><link rel=mask-icon href=https://www.muhfajar.blog/safari-pinned-tab.svg color=#252627><link rel="shortcut icon" href=https://www.muhfajar.blog/favicon.ico><meta name=msapplication-TileColor content="#252627"><meta name=theme-color content="#252627"><meta itemprop=name content="Deploying Now with Cloudflare"><meta itemprop=description content=":: this post has been updated with the latest update from Vercel (formerly ZEIT) I&rsquo;ve been playing around with Now deployment for a few months. First I thought about Now is magic, with only small configuration (in v2) I can deploy a static website easily and with the latest update, now I can deploy (with default template) any static website without any configuration. That&rsquo;s amazing.
How to Deploy First thing, you need Vercel account, of course."><meta itemprop=datePublished content="2019-10-15T04:52:59+07:00"><meta itemprop=dateModified content="2020-09-17T22:45:55+07:00"><meta itemprop=wordCount content="372"><meta itemprop=image content="https://www.muhfajar.blog/"><meta itemprop=keywords content="cloud,tech,now,cloudflare,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.muhfajar.blog/"><meta name=twitter:title content="Deploying Now with Cloudflare"><meta name=twitter:description content=":: this post has been updated with the latest update from Vercel (formerly ZEIT) I&rsquo;ve been playing around with Now deployment for a few months. First I thought about Now is magic, with only small configuration (in v2) I can deploy a static website easily and with the latest update, now I can deploy (with default template) any static website without any configuration. That&rsquo;s amazing.
How to Deploy First thing, you need Vercel account, of course."><meta property="article:section" content="tech"><meta property="article:published_time" content="2019-10-15 04:52:59 +0700 WIB"></head><body><div class=container><header class="header no-print"><span class=header__inner><div class=logo><a href=../ style=text-decoration:none><span class=logo__mark>></span></a>
<a href=../ style=text-decoration:none><span class=logo__text>$ cd /root/</span>
<span class=logo__cursor></span></a></div><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=https://www.muhfajar.blog/>blog</a></li><li><a href=https://www.muhfajar.id/>landing</a></li><li><a href=https://www.muhfajar.blog/resume>résumé</a></li><li class=hide-on-desktop><a href=https://www.muhfajar.blog/en/settings/>settings</a></li></ul></nav><span class="menu-trigger hide-on-desktop"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class="hide-on-phone hide-on-tablet"><span class="settings-menu unselectable"><a href=https://www.muhfajar.blog/en/settings/><svg class="setting-menu" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 0c-.883.0-1.742.102-2.57.283l.349 1.974c.715-.163 1.456-.257 2.221-.257 5.514.0 10 4.486 10 10 0 1.679-.421 3.26-1.154 4.65l-1.377-1.376c-.662-.661-1.002-1.581-.93-2.514.137-1.767-.471-3.58-1.82-4.93-1.225-1.224-2.825-1.83-4.428-1.83-.604.0-1.207.086-1.791.257l3.771 3.771c.408 1.889-2.33 4.66-4.242 4.242L6.258 10.5C6.086 11.084 6 11.688 6 12.292c0 1.602.607 3.202 1.83 4.426 1.35 1.351 3.164 1.958 4.93 1.821.934-.072 1.852.269 2.514.931l1.376 1.376c-1.391.734-2.971 1.154-4.65 1.154-5.514.0-10-4.486-10-10 0-1.914.551-3.697 1.489-5.217l2.173 2.173 1.353-7.014-7.015 1.35 2.037 2.038c-1.282 1.907-2.037 4.198-2.037 6.67.0 6.627 5.373 12 12 12s12-5.373 12-12-5.373-12-12-12z"/></svg></a></span></span></span></span></header><div class=content><main class=post><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 minutes</p></div><div class=post-info><p>This article was posted over a year ago. The information below could be outdated.</p></div><article><h1 class=post-title><a href=https://www.muhfajar.blog/deploying-now-with-cloudflare/>Deploying Now with Cloudflare</a></h1><div class=cover-container><a href=https://cdn.muhfajar.blog/sgp1/static/img/posts/cover/deploying-now-with-cloudflare.png class="progressive replace post-cover"><img src=https://cdn.muhfajar.blog/sgp1/static/img/posts/cover/deploying-now-with-cloudflare.png loading=lazy alt=image class=preview></a>
<span class="post-cover__source hide-on-phone hide-on-tablet"><a href=https://assets.zeit.co/image/upload/v1581518533/repositories/now-cli/v4.png>source</a></span></div><div class=post-content><sub><sup>:: this post has been updated with the latest update from Vercel (formerly ZEIT)</sup></sub><p>I&rsquo;ve been playing around with <a href=https://vercel.com/>Now</a> deployment for a few months. First I thought about Now is magic, with only small configuration (in v2) I can deploy a static website easily and with the latest update, now I can deploy (with default template) any static website without any configuration. That&rsquo;s amazing.</p><h2 id=how-to-deploy>How to Deploy</h2><p>First thing, you need Vercel account, of course. Next, if you use one of the templates from this <a href=https://github.com/zeit/now/tree/master/examples>list</a>, congratulation, you only need execute <code>now</code> from the project root, something like this.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cd my_project
now
</code></pre></div><p>That&rsquo;s it. For the rest let Now do the work.</p><p>After your project has been deployed, you will be provided with a link to the Preview Deployment, this can be shared <strong>immediately</strong>.</p><div class=giphy><iframe src=https://giphy.com/embed/3og0IAQG2BtR13joe4 class=giphy__content allowfullscreen scrolling=no allow=encrypted-media></iframe></div><h2 id=how-to-use-cloudflare-with-now>How to Use Cloudflare with Now</h2><p>Vercel have internal domain management, so you can directly buy domain inside Vercel dashboard. But if you want to set up domain setting using <a href=https://www.cloudflare.com/>Cloudflare</a> so you can set cache or other, this also simple. You just need register some DNS and encryption settings.</p><h3 id=add-dns-records>Add DNS Records</h3><p>To connecting Cloudflare with Vercel, you need add <code>CNAME</code> record with alias of <code>alias.zeit.co</code> so its traffic proxied through Cloudflare. Next, register domain to Vercel account using</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>now domains add your-domain-name.com
</code></pre></div><p>when add the domain success, you will get a verification code for further to fill <code>TXT</code> record with name <code>_now</code>.</p><p>After all records has been created, you need to verify domain using</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>now domains verify your-domain-name.com
</code></pre></div><h3 id=make-https-works>Make HTTPS Works</h3><p>To make https works you need change Cloudflare’s encryption mode to <strong>Full (strict)</strong> and then create page rules to make Enforce HTTPS for this domain:</p><ol><li>Go to page &ldquo;Create Page Rule&rdquo;</li><li>Add new page rules with configuration like this:<br>URL: <strong>http://*your-domain-name.com/*</strong><br>The settings are: <strong>Always Use HTTPS</strong></li><li>Save and Deploy</li></ol><h2 id=make-deploy-automatically>Make Deploy Automatically</h2><p>If your project source code hosted on <a href=https://github.com/>GitHub</a>, <a href=https://about.gitlab.com/>GitLab</a> or <a href=https://bitbucket.org/product/>Bitbucket</a>, Vercel have tools to integrating with deployment, so when you push code to the specific branch, Vercel will automatically detect changes and make a deployment. For more information,jump up to <a href=https://vercel.com/docs/v2/git-integrations>Vercel documentation</a>.</p><p>End of word, yes, I&rsquo;m using Now in my <a href=https://www.muhfajar.id/>personal website landing</a>. Next: <a href=https://www.muhfajar.blog/posts/purge-cache-with-git-hooks/>Purge Cache with Git Hooks</a>.</p></div></article><hr><div class=post-info><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=tag><a href=https://www.muhfajar.blog/tags/cloud>cloud</a></span><span class=tag><a href=https://www.muhfajar.blog/tags/tech>tech</a></span><span class=tag><a href=https://www.muhfajar.blog/tags/now>now</a></span><span class=tag><a href=https://www.muhfajar.blog/tags/cloudflare>cloudflare</a></span></p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>372 Words</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>2019-10-15 04:52 +0700</p><p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=https://github.com/muhfajar/blog/commit/ca1ff708add945298133cbc60ccbcd992cce8b2e target=_blank rel=noopener>ca1ff70</a> @ 2020-09-17</p></div><div id=comments class=thin><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"muhfajar-id"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main></div><footer class="footer no-print"><div class=footer__inner><div class=footer__content><span>&copy; 2021</span>
<span><a href=https://www.muhfajar.blog/>Muhamad Fajar</a></span>
<span><a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank rel=noopener>CC BY-NC 4.0</a></span>
<span><a href=https://www.muhfajar.blog/posts/index.xml target=_blank title=rss>rss</a></span></div></div></footer></div><script defer type=text/javascript src=https://www.muhfajar.blog/bundle.min.cbc0ac349ab518f03938f86619d3a7a9e81d4073db793360e8d935821b7acad80da6b577baa67ae577e99d8ea02a0c0f8ea4c0c823ab941b83f5e8c4ca54d3d7.js integrity="sha512-y8CsNJq1GPA5OPhmGdOnqegdQHPbeTNg6Nk1ght6ytgNprV3uqZ65XfpnY6gKgwPjqTAyCOrlBuD9ejEylTT1w=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-172938328-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-172938328-1');</script><script>const getTheme=window.localStorage&&window.localStorage.getItem("theme");const themeToggle=document.querySelector(".theme-toggle");const themeToggleText=document.querySelector("#theme-toggle-button");const isDark=getTheme==="dark";const metaThemeColor=document.querySelector("meta[name=theme-color]");const homepageImage=document.querySelector("#homepage-image");const notFoundImage=document.querySelector("#notfound-image");const getFont=window.localStorage&&window.localStorage.getItem("font");const fontToggle=document.querySelector(".font-toggle");const isNormal=getFont==="normal";const getFontSize=window.localStorage&&window.localStorage.getItem("font-size");const fontSizeIncrease=document.querySelector(".increase-font-size");const fontSizeDecrease=document.querySelector(".decrease-font-size");let fontSize=parseFloat(getFontSize)||0.85;const getToc=window.localStorage&&window.localStorage.getItem("toc");const toc=document.querySelector(".toc");const tocToggle=document.querySelector(".toc-toggle");const tocToggleText=document.querySelector("#toc-toggle-button");const tocIsHide=getToc==="hide";const invertImgColor=()=>{if(homepageImage){document.body.classList.contains("dark-theme")?homepageImage.src="/assets/img/light.png":homepageImage.src="/assets/img/dark.png";}
if(notFoundImage){document.body.classList.contains("dark-theme")?notFoundImage.src="/assets/img/404-light.png":notFoundImage.src="/assets/img/404-dark.png";}};if(getTheme!==null){document.body.classList.toggle("dark-theme",isDark);if(isDark){metaThemeColor.setAttribute("content","#252627");if(window.location.href.indexOf("settings")>-1){themeToggleText.textContent=buttonTextDark;}}else{metaThemeColor.setAttribute("content","#fafafa");if(window.location.href.indexOf("settings")>-1){themeToggleText.textContent=buttonTextLight;}}}else{if(window.location.href.indexOf("settings")>-1){themeToggleText.textContent=buttonTextLight;}}
if(getFont!==null){document.body.classList.toggle("normal-font",isNormal);}
if(getFontSize!==null){document.body.style.fontSize=getFontSize+'rem';}
if(getToc!==null){document.body.classList.toggle("hide-toc",tocIsHide);if(tocIsHide){if(document.getElementById("toc-container")){document.getElementById("toc-container").style.display="none"}
if(window.location.href.indexOf("settings")>-1){tocToggleText.textContent=buttonTextTocHide;}}else{if(window.location.href.indexOf("settings")>-1){tocToggleText.textContent=buttonTextTocShow;}}}else{if(window.location.href.indexOf("settings")>-1){tocToggleText.textContent=buttonTextTocShow;}}
if(window.location.href.indexOf("settings")>-1){themeToggle.addEventListener("click",()=>{document.body.classList.toggle("dark-theme");invertImgColor();window.localStorage&&window.localStorage.setItem("theme",document.body.classList.contains("dark-theme")?"dark":"light",);document.body.classList.contains("dark-theme")?metaThemeColor.setAttribute("content","#252627"):metaThemeColor.setAttribute("content","#fafafa");document.body.classList.contains("dark-theme")?themeToggleText.textContent=buttonTextDark:themeToggleText.textContent=buttonTextLight;});fontToggle.addEventListener("click",()=>{document.body.classList.toggle("normal-font");window.localStorage&&window.localStorage.setItem("font",document.body.classList.contains("normal-font")?"normal":"mono",);});fontSizeIncrease.addEventListener("click",()=>{fontSize+=0.05;changeFontSize(fontSize)});fontSizeDecrease.addEventListener("click",()=>{fontSize-=0.05;changeFontSize(fontSize)});tocToggle.addEventListener("click",()=>{document.body.classList.toggle("hide-toc");window.localStorage&&window.localStorage.setItem("toc",document.body.classList.contains("hide-toc")?"hide":"show",);document.body.classList.contains("hide-toc")?tocToggleText.textContent=buttonTextTocHide:tocToggleText.textContent=buttonTextTocShow;});}
function changeFontSize(fontSize){if(fontSize>=0.87&&fontSize<=1.85){window.localStorage&&window.localStorage.setItem("font-size",String(fontSize),);document.body.style.fontSize=fontSize+'rem';}}
window.addEventListener&&window.requestAnimationFrame&&document.getElementsByClassName&&window.addEventListener('load',function(){'use strict';let e,t,n=document.getElementsByClassName('progressive replace');function i(){t=t||setTimeout(function(){t=null,r()},300)}
function r(){n.length&&requestAnimationFrame(function(){let t,i,r=window.innerHeight,a=0;for(;a<n.length;)0<(i=(t=n[a].getBoundingClientRect()).top)+t.height&&r>i?(s(n[a]),n[a].classList.remove('replace')):a++;e=n.length})}
function s(e,t){const n=e&&(e.getAttribute('data-href')||e.href);if(n){const i=new Image,r=e.dataset;r&&(r.srcset&&(i.srcset=r.srcset),r.sizes&&(i.sizes=r.sizes)),i.onload=function(){requestAnimationFrame(function(){n===e.href&&(e.style.cursor='default',e.addEventListener('click',function(e){e.preventDefault()},!1));const t=e.querySelector&&e.querySelector('img.preview');e.insertBefore(i,t&&t.nextSibling).addEventListener('animationend',function(){t&&(t.alt&&(i.alt=t.alt),e.removeChild(t)),i.classList.remove('reveal')})})},(t=1+(t||0))<3&&(i.onerror=function(){setTimeout(function(){s(e,t)},3e3*t)}),i.className='reveal',i.src=n}}
window.addEventListener('scroll',i,!1),window.addEventListener('resize',i,!1),MutationObserver&&new MutationObserver(function(){n.length!==e&&r()}).observe(document.body,{subtree:!0,childList:!0,attributes:!0,characterData:!0}),r()},!1);</script></body></html>